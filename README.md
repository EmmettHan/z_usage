# 智谱AI费用分析应用

一个用于可视化智谱AI开放平台费用明细数据的本地部署网页应用。

## 功能特点

- **数据导入**: 支持 Excel (.xlsx, .xls) 文件导入
- **数据可视化**: 提供折线图和柱状图两种图表类型
- **灵活筛选**: 支持按时间范围（日/周/月）和产品类型筛选
- **统计分析**: 实时显示总Token用量、记录数量、产品类型等统计信息
- **响应式设计**: 支持桌面和移动设备访问
- **本地部署**: 数据仅在本地处理，保护隐私安全

## 技术栈

- **前端框架**: HTML5 + CSS3 + JavaScript (ES6+)
- **UI框架**: Bootstrap 5.x
- **图表库**: Chart.js
- **数据处理**: SheetJS (xlsx.full.min.js)
- **架构**: 模块化设计，包含数据处理器、筛选管理器、图表渲染器等

## 文件结构

```
├── index.html              # 主页面
├── css/
│   └── style.css          # 样式文件
├── js/
│   ├── main.js            # 主应用控制器
│   ├── dataProcessor.js   # 数据处理模块
│   ├── filterManager.js   # 筛选管理模块
│   └── chartRenderer.js   # 图表渲染模块
├── lib/
│   ├── bootstrap.min.css  # Bootstrap样式
│   ├── bootstrap.min.js   # Bootstrap脚本
│   ├── chart.js          # Chart.js库
│   └── xlsx.full.min.js  # SheetJS库
└── start.sh              # 启动脚本
```

## 使用方法

### 1. 启动应用

在项目根目录下运行：

```bash
./start.sh
```

或者手动启动：

```bash
python3 -m http.server 8000
```

然后在浏览器中访问 `http://localhost:8000`

### 2. 导入数据

1. 点击"数据导入"区域的文件选择框
2. 选择包含智谱AI费用明细的Excel文件
3. 点击"上传并分析"按钮

### 3. 数据筛选

- **时间范围**: 选择按日、按周或按月查看数据
- **产品类型**: 多选筛选特定产品类型的数据
- **图表类型**: 在折线图和柱状图之间切换

### 4. 查看统计

应用会自动显示以下统计信息：
- 总Token用量
- 记录数量
- 产品类型数量
- 时间范围

## 数据格式要求

Excel文件应包含以下字段：
- `账期`: 日期字段
- `模型产品名称`: 产品类型字段
- `抵扣用量`: Token使用量字段（数值）

## 性能特性

- **数据处理**: 支持处理1000-5000条记录
- **文件大小**: 最大支持10MB的Excel文件
- **响应时间**: 数据处理<2秒，图表渲染<1秒
- **缓存机制**: 智能缓存提高性能

## 键盘快捷键

- `Ctrl+O`: 打开文件选择对话框
- `Ctrl+S`: 导出当前筛选的数据
- `Ctrl+R`: 重置所有筛选器

## 浏览器兼容性

支持以下浏览器：
- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 错误处理

应用包含完善的错误处理机制：
- 文件格式验证
- 数据格式验证
- 友好的错误提示
- 自动重试机制

## 隐私保护

- 所有数据仅在本地处理
- 不会上传到任何服务器
- 不收集任何用户信息
- 支持离线使用

## 开发信息

应用采用模块化架构设计，主要模块包括：

1. **DataProcessor**: 负责Excel文件解析和数据清洗
2. **FilterManager**: 管理各种筛选条件和状态
3. **ChartRenderer**: 处理图表渲染和交互
4. **App**: 主应用控制器，协调各模块工作

## 许可证

MIT License

## 贡献

欢迎提交问题和改进建议！
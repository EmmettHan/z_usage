# 智谱AI费用数据可视化工具

这是一个基于Web的智谱AI费用数据可视化工具，可以帮助用户分析智谱AI平台的使用费用数据。

## 功能特点

- 📊 **数据可视化**: 支持折线图和柱状图展示费用趋势
- 📁 **文件上传**: 支持拖拽上传Excel文件（.xlsx, .xls格式）
- 🔍 **数据筛选**: 支持按时间范围、模型类型筛选数据
- 📈 **多维度分析**: 支持费用金额、Token数量、请求次数等多维度分析
- 📱 **响应式设计**: 适配桌面和移动设备
- 💾 **数据导出**: 支持将筛选后的数据导出为CSV格式

## 技术栈

- **前端框架**: HTML5 + CSS3 + JavaScript (ES6+)
- **UI框架**: Bootstrap 5
- **图表库**: Chart.js
- **Excel处理**: SheetJS (xlsx)
- **架构**: 模块化设计，易于维护和扩展

## 项目结构

```
zpuUsage/
├── index.html              # 主页面
├── test.html               # 功能测试页面
├── css/
│   └── style.css          # 自定义样式
├── js/
│   ├── dataProcessor.js   # 数据处理模块
│   ├── chartRenderer.js   # 图表渲染模块
│   ├── filterManager.js   # 筛选管理模块
│   └── main.js            # 主逻辑模块
└── lib/                   # 第三方库
    ├── bootstrap.min.css
    ├── chart.js
    └── xlsx.full.min.js
```

## 快速开始

### 1. 直接使用

1. 下载项目文件到本地
2. 用浏览器打开 `index.html`
3. 上传您的智谱AI费用Excel文件
4. 开始分析数据

### 2. 本地服务器运行（推荐）

```bash
# 使用Python创建简单服务器
cd zpuUsage
python -m http.server 8000

# 使用Node.js创建简单服务器
npx http-server -p 8000
```

然后在浏览器中访问 `http://localhost:8000`

## 使用说明

### 1. 数据上传

- 点击"选择文件"按钮或直接拖拽Excel文件到上传区域
- 支持.xlsx和.xls格式的Excel文件
- 文件应包含以下列：时间、模型、输入token、输出token、总token、费用、请求次数

### 2. 数据筛选

- **时间范围**: 选择全部时间、最近7天、最近30天、最近90天或自定义日期范围
- **模型筛选**: 选择特定模型或全部模型
- **图表类型**: 切换折线图或柱状图
- **指标类型**: 选择费用金额、Token数量或请求次数

### 3. 数据分析

- **统计概览**: 查看总费用、总Token数、总请求次数、平均单次费用
- **趋势图表**: 查看主趋势图或模型对比图
- **详细数据**: 在表格中查看每条详细记录
- **数据导出**: 将筛选后的数据导出为CSV文件

## 支持的数据格式

Excel文件应包含以下列（支持中英文列名）：

| 中文列名 | 英文列名 | 说明 |
|---------|---------|------|
| 时间 | time/date | 调用时间 |
| 模型 | model | 使用的模型名称 |
| 输入token | input_tokens | 输入的Token数量 |
| 输出token | output_tokens | 输出的Token数量 |
| 总token | total_tokens | 总Token数量 |
| 费用 | amount/cost | 费用金额 |
| 请求次数 | requests | 请求次数 |

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 11+
- Edge 79+

## 故障排除

### 1. 文件上传失败

- 确保文件格式为.xlsx或.xls
- 检查文件大小是否过大（建议小于10MB）
- 确保浏览器支持FileReader API

### 2. 图表不显示

- 检查控制台是否有错误信息
- 确保数据格式正确
- 尝试刷新页面

### 3. 数据解析错误

- 检查Excel文件格式是否符合要求
- 确保日期格式正确
- 检查数值列是否为数字格式

## 开发说明

### 模块架构

- **DataProcessor**: 负责Excel文件读取和数据解析
- **ChartRenderer**: 负责图表的创建和渲染
- **FilterManager**: 负责数据筛选和过滤
- **App**: 主控制器，协调各模块工作

### 扩展功能

1. **添加新的图表类型**: 在ChartRenderer中添加新的图表创建方法
2. **支持更多数据格式**: 在DataProcessor中添加新的数据解析逻辑
3. **增加筛选条件**: 在FilterManager中添加新的筛选选项
4. **自定义主题**: 在CSS中添加新的主题样式

## 许可证

本项目采用MIT许可证。

## 贡献

欢迎提交Issue和Pull Request来改进这个项目。

## 联系方式

如有问题或建议，请通过以下方式联系：

- 创建GitHub Issue
- 发送邮件到项目维护者

---

**注意**: 这是一个纯前端应用，所有数据处理都在浏览器中完成，不会上传任何数据到服务器。